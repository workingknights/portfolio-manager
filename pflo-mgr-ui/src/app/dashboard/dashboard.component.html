<div class="container-fluid" *ngIf="auth.authenticated()">

	<div class="row" *ngIf="summary">
		<div class=col-sm-4>
			<ul class="list-group">
				<li class="list-group-item">
					Market Value: {{summary.marketValue | currency:'USD':true}}
				</li>
			</ul>
		</div>
		<div class=col-sm-4>
			<ul class="list-group">
				<li class="list-group-item" [ngClass]="{greenCell: summary.dailyGain > 0, redCell: summary.dailyGain < 0}">
					Daily Gain: {{summary.dailyGain | currency:'USD':true}}
				</li>
			</ul>
		</div>
		<div class=col-sm-4>
			<ul class="list-group">
				<li class="list-group-item" [ngClass]="{greenCell: summary.totalGain > 0, redCell: summary.totalGain < 0}">
					Total Gain: {{summary.totalGain | currency:'USD':true}}
				</li>
			</ul>
		</div>
	</div>

	<div class="row">
		<div class="col-sm-12">
			<form class="form-inline float-sm-left">
				<button class="btn btn-sm btn-outline-primary btn-margin-top" (click)="openAddHoldingForm()">Add Holding</button>
			</form>
		</div>
	</div>
	<div class="row" *ngIf="showAddHoldingForm">
		<div class="col-sm-12">
			<div>
				<app-holding-form (added)="refreshPortfolio($event)" (closed)="showAddHoldingForm=false"></app-holding-form>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-sm-12">
			<swui-datatable
				[rows]="portfolioEntries"
				[columnMode]="'flex'"
				[rowHeight]="'auto'"
				class="material">
				<swui-datatable-column prop="ticker" [flexGrow]="1">
					<template let-value="value" swui-datatable-cell-template>
						<!-- <a href="http://finance.yahoo.com/quote/{{value}}?ltr=1" target="_blank">{{value}}</a> -->
						<a [routerLink]="['/portfolioEntry', value]">{{value}}</a>
					</template>
				</swui-datatable-column>
        <swui-datatable-column name="Shares" prop="totalShares" [flexGrow]="1"></swui-datatable-column>
        <swui-datatable-column name="Curr Price" prop="currPrice" [flexGrow]="1.3">
					<template let-value="value" swui-datatable-cell-template>
						<div style="text-align:right">{{value | number:'1.2-2'}}</div>
					</template>
				</swui-datatable-column>
				<swui-datatable-column name="Prev Close" prop="previousClose" [flexGrow]="1.3">
					<template let-value="value" swui-datatable-cell-template>
						<div style="text-align:right">{{value | number:'1.2-2'}}</div>
					</template>
				</swui-datatable-column>
				<swui-datatable-column name="% Change" prop="percentChange" [flexGrow]="1.2">
					<template let-value="value" swui-datatable-cell-template>
						<span [ngClass]="{greenCell: value >= 0, redCell: value < 0}">{{value | percent:'1.2-2'}}</span>
					</template>
				</swui-datatable-column>
				<swui-datatable-column name="Daily Gain" prop="dailyGain" [flexGrow]="1.2">
					<template let-value="value" swui-datatable-cell-template>
						<span [ngClass]="{greenCell: value > 0, redCell: value < 0}">{{value.toFixed(2) | currency:'USD':true}}</span>
					</template>
				</swui-datatable-column>
				<swui-datatable-column name="B/S" prop="recommendation" [flexGrow]="1">
					<template let-value="value" swui-datatable-cell-template>
						<span [ngClass]="{greenCell: value === 'BUY', redCell: value === 'SELL'}">{{value}}</span>
					</template>
				</swui-datatable-column>
        <swui-datatable-column prop="marketValue" [flexGrow]="1.5" >
					<template let-value="value" swui-datatable-cell-template>
						{{value.toFixed(2) | currency:'USD':true}}
					</template>
				</swui-datatable-column>
				<swui-datatable-column name="Total % Gain" prop="totalPercentGain" [flexGrow]="1.3">
					<template let-value="value" swui-datatable-cell-template>
						<div style="text-align:right">
							<span [ngClass]="{greenCell: value > 0, redCell: value < 0}">{{value | percent:'1.2-2'}}</span>
						</div>
					</template>
				</swui-datatable-column>
				<swui-datatable-column prop="totalGain" [flexGrow]="1.6">
					<template let-value="value" swui-datatable-cell-template>
						<div style="text-align:right">
							<span [ngClass]="{greenCell: value > 0, redCell: value < 0}">{{value.toFixed(2) | currency:'USD':true}}</span>
						</div>
					</template>
				</swui-datatable-column>
        <swui-datatable-column prop="yearLow" [flexGrow]="1.2">
					<template let-value="value" swui-datatable-cell-template>
						<div style="text-align:right">{{value | number:'1.2-2'}}</div>
					</template>
				</swui-datatable-column>
        <swui-datatable-column prop="yearHigh" [flexGrow]="1.3">
					<template let-value="value" swui-datatable-cell-template>
						<div style="text-align:right">{{value | number:'1.2-2'}}</div>
					</template>
				</swui-datatable-column>
			</swui-datatable>
		</div>
	</div>

</div>
